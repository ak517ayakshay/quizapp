

{% extends 'app.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center">{{ test_name }}</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
    {% endwith %}

    {% if questions %}
        <form action="/submit_test/{{ test_id }}" method="POST">        
            <div class="list-group mt-4">
                {% for question in questions %}
                    <div class="list-group-item">
                        <h5>Q: {{ question[2] }}</h5>  <!-- question_text -->
                        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer_{{ question[0] }}" value="1" id="option_1_{{ question[0] }}">
                            <label class="form-check-label" for="option_1_{{ question[0] }}">
                                {{ question[3] }}  <!-- option_1 -->
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer_{{ question[0] }}" value="2" id="option_2_{{ question[0] }}">
                            <label class="form-check-label" for="option_2_{{ question[0] }}">
                                {{ question[4] }}  <!-- option_2 -->
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer_{{ question[0] }}" value="3" id="option_3_{{ question[0] }}">
                            <label class="form-check-label" for="option_3_{{ question[0] }}">
                                {{ question[5] }}  <!-- option_3 -->
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer_{{ question[0] }}" value="4" id="option_4_{{ question[0] }}">
                            <label class="form-check-label" for="option_4_{{ question[0] }}">
                                {{ question[6] }}  <!-- option_4 -->
                            </label>
                        </div>

                    </div>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary mt-4">Submit Test</button>
        </form>
        
    {% else %}
        <p>No questions available for this test.</p>
    {% endif %}
</div>
{% endblock %}
